<div class="max-w-7xl mx-auto p-6 space-y-6">

  <!-- Header -->
  <div class="flex justify-between items-center">
    <h1 class="text-2xl font-semibold">ğŸ“ Espace B2B</h1>

    <div class="flex gap-2">
      <button pButton label="Dossier" icon="pi pi-folder-plus"
              class="p-button-sm" (click)="showNewFolder = true"></button>
      <button pButton label="Fichier" icon="pi pi-upload"
              class="p-button-sm p-button-secondary"
              (click)="showUpload = true"></button>
    </div>
  </div>

  <!-- Stats -->
  <div class="grid grid-cols-3 gap-4">
    <div class="bg-white rounded-xl shadow p-4">
      ğŸ“ <span class="font-semibold">{{ stats.folders }}</span> dossiers
    </div>
    <div class="bg-white rounded-xl shadow p-4">
      ğŸ“„ <span class="font-semibold">{{ stats.files }}</span> fichiers
    </div>
    <div class="bg-white rounded-xl shadow p-4">
      ğŸ’¾ {{ formatSize(stats.storage) }}
    </div>
  </div>

  <!-- Search -->
  <div class="flex justify-end">
    <input pInputText [(ngModel)]="searchQuery"
           placeholder="Rechercher..."
           class="w-64" (keyup.enter)="doSearch()" />
  </div>

  <!-- Table -->
  <p-table [value]="resources" responsiveLayout="scroll"
           class="shadow rounded-xl">

    <ng-template pTemplate="header">
      <tr>
        <th>Nom</th>
        <th>Taille</th>
        <th class="text-right">Actions</th>
      </tr>
    </ng-template>

    <ng-template pTemplate="body" let-r>
      <tr>
        <td class="cursor-pointer"
            (dblclick)="r.type === 'FOLDER' && loadFolder(r)">
          <i class="pi"
             [ngClass]="r.type === 'FOLDER' ? 'pi-folder' : 'pi-file'"
             class="mr-2"></i>
          {{ r.name }}
        </td>

        <td>
          {{ r.type === 'FILE' ? formatSize(r.fileSize!) : '' }}
        </td>

        <td class="text-right">
<!--          <button pButton icon="pi pi-trash"-->
<!--                  class="p-button-rounded p-button-text p-button-danger"-->
<!--                  (click)="confirmDelete(r)">-->
<!--            -->
<!--          </button>-->
        </td>
      </tr>
    </ng-template>

  </p-table>

  <!-- Dialog Folder -->
  <p-dialog header="Nouveau dossier"
            [(visible)]="showNewFolder"
            [modal]="true" [style]="{width:'30rem'}">

    <input pInputText [(ngModel)]="folderName"
           placeholder="Nom du dossier"
           class="w-full mb-4" />

    <div class="flex justify-end gap-2">
      <button pButton label="Annuler"
              class="p-button-text"
              (click)="showNewFolder=false"></button>
      <button pButton label="CrÃ©er"
              (click)="createFolder()"></button>
    </div>

  </p-dialog>

</div>
